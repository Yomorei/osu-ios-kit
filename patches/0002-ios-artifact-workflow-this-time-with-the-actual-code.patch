From b77c2ac922d35a8150e0dd12ea8495dc3b40f685 Mon Sep 17 00:00:00 2001
From: Yomorei <Yomoreibusiness@gmail.com>
Date: Tue, 3 Feb 2026 11:12:55 -0600
Subject: [PATCH 02/10] ios artifact workflow, this time with the actual code..

---
 .github/workflows/ios-artifact.yml | 54 ++++++++++++++++++++++++++++++
 1 file changed, 54 insertions(+)

diff --git a/.github/workflows/ios-artifact.yml b/.github/workflows/ios-artifact.yml
index e69de29bb2..83ad259660 100644
--- a/.github/workflows/ios-artifact.yml
+++ b/.github/workflows/ios-artifact.yml
@@ -0,0 +1,54 @@
+name: iOS build artifact
+
+on:
+  workflow_dispatch:
+  push:
+    branches: [ main ]
+
+jobs:
+  build-ios:
+    runs-on: macos-15
+    timeout-minutes: 60
+
+    steps:
+      - uses: actions/checkout@v4
+
+      - uses: actions/setup-dotnet@v4
+        with:
+          dotnet-version: "8.0.x"
+
+      - name: Install iOS workload
+        run: dotnet workload install ios
+
+      - name: Use Xcode 16.4
+        run: sudo xcode-select -switch /Applications/Xcode_16.4.app
+
+      - name: Build (Release)
+        run: dotnet build -c Release osu.iOS.slnf
+
+      - name: Locate outputs
+        shell: bash
+        run: |
+          echo "Searching for .ipa..."
+          find . -maxdepth 8 -type f -name "*.ipa" -print || true
+          echo "Searching for .app..."
+          find . -maxdepth 8 -type d -name "*.app" -print || true
+
+      - name: Zip first .app (if present)
+        shell: bash
+        run: |
+          APP_DIR="$(find . -maxdepth 8 -type d -name '*.app' | head -n 1)"
+          if [ -z "$APP_DIR" ]; then
+            echo "No .app found (maybe produced .ipa instead)."
+            exit 0
+          fi
+          echo "Using APP_DIR=$APP_DIR"
+          ditto -c -k --sequesterRsrc --keepParent "$APP_DIR" osu-iOS-app.zip
+
+      - name: Upload artifacts
+        uses: actions/upload-artifact@v4
+        with:
+          name: osu-ios-build
+          path: |
+            **/*.ipa
+            osu-iOS-app.zip
-- 
2.50.1.windows.1

